<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <title>Dynamic Form (Vanilla JS)</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 24px;
      }
      .row {
        display: flex;
        gap: 8px;
        align-items: center;
        margin-bottom: 8px;
      }
      .row input {
        flex: 1;
        padding: 6px 8px;
      }
      .row button {
        padding: 6px 10px;
      }
      .actions {
        margin-top: 16px;
        display: flex;
        gap: 8px;
      }
      .note {
        color: #666;
        font-size: 12px;
        margin-top: 6px;
      }
      .output {
        margin-top: 16px;
        background: #f6f6f6;
        padding: 12px;
        border-radius: 6px;
      }
    </style>
  </head>
  <body>
    <h2>ฟอร์มเพิ่ม/ลบช่อง และส่งเป็น Array</h2>

    <form id="dynamicForm" action="/your-endpoint" method="POST">
      <div id="list">
        <!-- เริ่มต้นมี 1 ช่อง -->
        <div class="row" style="flex-direction: row">
          <select
            name="items[0][Module]"
            class="module-select"
            style="width: 50%"
          ></select>
          <textarea
            name="items[0][Desc]"
            type="text"
            placeholder="ใส่ค่า..."
            style="width: 50%"
            rows="2"
          ></textarea>
          <button type="button" class="remove" aria-label="ลบแถว">ลบ</button>
        </div>
      </div>

      <div class="actions">
        <button type="button" id="add">+ เพิ่มแถว</button>
        <button type="submit">ส่งฟอร์ม</button>
      </div>

      <div class="note">
        หมายเหตุ: ฟิลด์ใช้ชื่อ
        <code>items</code> เพื่อให้ฝั่งเซิร์ฟเวอร์รับเป็นอาร์เรย์อัตโนมัติ
      </div>
    </form>

    <div class="output" id="preview" hidden></div>

    <!-- เทมเพลตของแถวใหม่ -->
    <template id="row-template">
      <div class="row" style="display: flex; flex-direction: row; gap: 16px">
        <div
          class="field"
          style="display: flex; flex-direction: column; width: 50%"
        >
          <label>ระบบ</label>
          <select name="items[0][Module]" class="module-select"></select>
        </div>
        <div
          class="field"
          style="display: flex; flex-direction: column; width: 50%"
        >
          <label>รายละเอียด</label>
          <textarea
            name="items[0][Desc]"
            placeholder="ใส่ค่า..."
            rows="2"
          ></textarea>
        </div>
        <button type="button" class="remove" aria-label="ลบแถว">ลบ</button>
      </div>
    </template>

    <script src="index.js" />
  </body>
</html>
